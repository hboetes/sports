# Description: toolkit for building status bars, widgets, lockscreens, and other desktop components using QtQuick
# dnf install cmake qt6-qtdeclarative-devel qt6-qtbase-devel qt6-qtwayland-devel ninja gcc-c++ qt6-qtshadertools-devel qt6-qtbase-private-devel cli11-devel breakpad-devel polkit-devel jemalloc breakpad-static

name=quickshell
version=git
release=1
source=(
    https://git.outfoxxed.me/quickshell/quickshell.git
    quickshell_adminpath.patch
)

build()
{
    # Doesn't work with sccache
    unset CXX
    cd $name
    patch -p1 -i $SRC/quickshell_adminpath.patch
    cmake \
          -GNinja -B build -DCMAKE_BUILD_TYPE=RelWithDebInfo \
          -DHYPRLAND=ON -DI3=ON -DCRASH_REPORTER=OFF -DINSTALL_QMLDIR=/usr/lib64/qt6/qml
    cmake --build build
    DESTDIR=$PKG cmake --install build
}
