# Description: fancy wayland compositor
# URL:         https://github.com/hyprwm/Hyprland.git

name=hyprlock
version=git
release=1
branch=main
source=(
    https://github.com/hyprwm/hyprlock.git
    hyprlock.diff
)

build()
{
    cd $name
    patch -p1 -i $SRC/$name.diff
    cmake --no-warn-unused-cli -DCMAKE_BUILD_TYPE:STRING=Release -S . -B ./build
    cmake --build ./build --config Release --target hyprlock -j$(nproc 2>/dev/null || getconf _NPROCESSORS_CONF)
    DESTDIR=$PKG cmake --install build
    # Hack
    mkdir -p $PKG/etc/pam.d/
    mv $PKG/usr/local/etc/pam.d/hyprlock $PKG/etc/pam.d/hyprlock
    rm -rf $PKG/usr/local/etc
}
